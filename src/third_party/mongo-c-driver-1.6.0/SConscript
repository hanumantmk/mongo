# -*- mode: python; -*-
Import("env")

env = env.Clone()

env.Append(CPPPATH=[
    'src/mongoc',
    'src/libbson/src/bson',
    'src/libbson/src',
])
env.Prepend(CPPDEFINES=[
    'MONGOC_COMPILATION',
    'BSON_COMPILATION',
    '_GNU_SOURCE',
])

env.Library(
    target="mongoc",
    source=[
        "src/libbson/src/jsonsl/jsonsl.c",
        "src/libbson/src/bson/bson-json.c",
        "src/libbson/src/bson/bson-atomic.c",
        "src/libbson/src/bson/bson-version-functions.c",
        "src/libbson/src/bson/bson-context.c",
        "src/libbson/src/bson/bson-iter.c",
        "src/libbson/src/bson/bson-string.c",
        "src/libbson/src/bson/bson-keys.c",
        "src/libbson/src/bson/bson-reader.c",
        "src/libbson/src/bson/bson-oid.c",
        "src/libbson/src/bson/bson-value.c",
        "src/libbson/src/bson/bson-utf8.c",
        "src/libbson/src/bson/bson-writer.c",
        "src/libbson/src/bson/bson-iso8601.c",
        "src/libbson/src/bson/bson-timegm.c",
        "src/libbson/src/bson/bson-md5.c",
        "src/libbson/src/bson/bson-decimal128.c",
        "src/libbson/src/bson/bson-clock.c",
        "src/libbson/src/bson/bson-memory.c",
        "src/libbson/src/bson/bson-error.c",
        "src/libbson/src/bson/bson.c",
        "src/libbson/src/bson/bcon.c",
        "src/mongoc/mongoc-crypto-cng.c",
        "src/mongoc/mongoc-rand-common-crypto.c",
        "src/mongoc/mongoc-list.c",
        "src/mongoc/mongoc-b64.c",
        "src/mongoc/mongoc-cursor-transform.c",
        "src/mongoc/mongoc-log.c",
        "src/mongoc/mongoc-scram.c",
        "src/mongoc/mongoc-array.c",
        "src/mongoc/mongoc-host-list.c",
        "src/mongoc/mongoc-queue.c",
        "src/mongoc/mongoc-apm.c",
        "src/mongoc/mongoc-linux-distro-scanner.c",
        "src/mongoc/mongoc-secure-transport.c",
        "src/mongoc/mongoc-uri.c",
        "src/mongoc/mongoc-cluster-sasl.c",
        "src/mongoc/mongoc-gridfs-file-page.c",
        "src/mongoc/mongoc-stream-buffered.c",
        "src/mongoc/mongoc-stream-socket.c",
        "src/mongoc/mongoc-cursor-array.c",
        "src/mongoc/mongoc-find-and-modify.c",
        "src/mongoc/mongoc-gridfs-file.c",
        "src/mongoc/mongoc-topology-description.c",
        "src/mongoc/mongoc-stream-tls-secure-transport.c",
        "src/mongoc/mongoc-cursor-cursorid.c",
        "src/mongoc/mongoc-secure-channel.c",
        "src/mongoc/mongoc-stream-tls.c",
        "src/mongoc/mongoc-version-functions.c",
        "src/mongoc/mongoc-rand-openssl.c",
        "src/mongoc/mongoc-stream-file.c",
        "src/mongoc/mongoc-topology.c",
        "src/mongoc/mongoc-counters.c",
        "src/mongoc/mongoc-read-concern.c",
        "src/mongoc/mongoc-matcher-op.c",
        "src/mongoc/mongoc-server-stream.c",
        "src/mongoc/mongoc-init.c",
        "src/mongoc/mongoc-server-description.c",
        "src/mongoc/mongoc-opcode.c",
        "src/mongoc/mongoc-cluster.c",
        "src/mongoc/mongoc-rand-cng.c",
        "src/mongoc/mongoc-ssl.c",
        "src/mongoc/mongoc-crypto-common-crypto.c",
        "src/mongoc/mongoc-handshake.c",
        "src/mongoc/mongoc-write-concern.c",
        "src/mongoc/mongoc-memcmp.c",
        "src/mongoc/mongoc-bulk-operation.c",
        "src/mongoc/mongoc-stream-tls-openssl.c",
        "src/mongoc/mongoc-buffer.c",
        "src/mongoc/mongoc-write-command.c",
        "src/mongoc/mongoc-collection.c",
        "src/mongoc/mongoc-index.c",
        "src/mongoc/mongoc-topology-scanner.c",
        "src/mongoc/mongoc-set.c",
        "src/mongoc/mongoc-crypto-openssl.c",
        "src/mongoc/mongoc-topology-description-apm.c",
        "src/mongoc/mongoc-stream-tls-secure-channel.c",
        "src/mongoc/mongoc-matcher.c",
        "src/mongoc/mongoc-stream.c",
        "src/mongoc/mongoc-stream-gridfs.c",
        "src/mongoc/mongoc-gridfs-file-list.c",
        "src/mongoc/mongoc-sasl.c",
        "src/mongoc/mongoc-crypto.c",
        "src/mongoc/mongoc-client-pool.c",
        "src/mongoc/mongoc-socket.c",
        "src/mongoc/mongoc-async.c",
        "src/mongoc/mongoc-read-prefs.c",
        "src/mongoc/mongoc-gridfs.c",
        "src/mongoc/mongoc-client.c",
        "src/mongoc/mongoc-cursor.c",
        "src/mongoc/mongoc-stream-tls-openssl-bio.c",
        "src/mongoc/mongoc-libressl.c",
        "src/mongoc/mongoc-stream-tls-libressl.c",
        "src/mongoc/mongoc-database.c",
        "src/mongoc/mongoc-rpc.c",
        "src/mongoc/mongoc-async-cmd.c",
        "src/mongoc/mongoc-openssl.c",
        "src/mongoc/mongoc-util.c",
    ])

